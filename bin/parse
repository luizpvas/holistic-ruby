#!/usr/bin/env ruby
# frozen_string_literal: true

require "bundler/setup"
require "holistic"

root_directory = ARGV.first
name = ::File.basename(root_directory)
application = ::Holistic::Application.new(name:, root_directory:)

::Holistic::Ruby::Parser::ParseDirectory.call(application:, directory_path: application.root_directory)

::Holistic::Ruby::TypeInference::SolvePendingReferences.call(application:)

summary = { amount_of_records: application.database.size }

puts(summary.inspect)
